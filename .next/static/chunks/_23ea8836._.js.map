{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/graceli/Documents/Dev/PaperProtoTwo/PaperProto/contexts/AuthContext.js"],"sourcesContent":["// contexts/AuthContext.js\n'use client';\n\nimport { createContext, useContext, useState, useEffect } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { \n  getAuth, \n  onAuthStateChanged,\n  signOut\n} from 'firebase/auth';\nimport { getFirestore, doc, getDoc } from 'firebase/firestore';\n\n// Your Firebase configuration\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID\n};\n\n// Initialize Firebase\nlet app;\ntry {\n  app = initializeApp(firebaseConfig);\n} catch (error) {\n  // Prevent multiple Firebase initializations\n  if (!/already exists/.test(error.message)) {\n    console.error('Firebase initialization error', error.stack);\n  }\n}\n\n// Get Firebase services\nconst auth = getAuth();\nconst db = getFirestore();\n\nconst AuthContext = createContext();\n\nexport function AuthProvider({ children }) {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  \n  useEffect(() => {\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      setCurrentUser(user);\n      \n      if (user) {\n        // Fetch user data from Firestore when user is authenticated\n        try {\n          const userDoc = await getDoc(doc(db, 'users', user.uid));\n          if (userDoc.exists()) {\n            setUserData(userDoc.data());\n          } else {\n            // User document doesn't exist yet (might be a new Google sign-in)\n            setUserData(null);\n          }\n        } catch (error) {\n          console.error(\"Error fetching user data:\", error);\n          setUserData(null);\n        }\n      } else {\n        setUserData(null);\n      }\n      \n      setLoading(false);\n    });\n\n    return unsubscribe;\n  }, []);\n\n  // Sign out function\n  const logout = async () => {\n    try {\n      await signOut(auth);\n      setCurrentUser(null);\n      setUserData(null);\n    } catch (error) {\n      console.error(\"Error signing out:\", error);\n    }\n  };\n\n  // Get or refresh user data\n  const refreshUserData = async () => {\n    if (!currentUser) return null;\n    \n    try {\n      const userDoc = await getDoc(doc(db, 'users', currentUser.uid));\n      if (userDoc.exists()) {\n        const data = userDoc.data();\n        setUserData(data);\n        return data;\n      }\n      return null;\n    } catch (error) {\n      console.error(\"Error refreshing user data:\", error);\n      return null;\n    }\n  };\n\n  // Check if username exists\n  const checkUsernameExists = async (username) => {\n    try {\n      const userRef = doc(db, 'usernames', username);\n      const userSnap = await getDoc(userRef);\n      return userSnap.exists();\n    } catch (error) {\n      console.error(\"Error checking username:\", error);\n      return false;\n    }\n  };\n\n  const value = {\n    currentUser,\n    userData,\n    loading,\n    logout,\n    refreshUserData,\n    checkUsernameExists,\n    auth,\n    db\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {!loading && children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 164, "column": 0}, "map": {"version":3,"sources":["file:///Users/graceli/Documents/Dev/PaperProtoTwo/PaperProto/app/layout.js"],"sourcesContent":["// app/layout.js\n'use client';\n\nimport { AuthProvider } from '../contexts/AuthContext';\nimport './globals.css';\n\nexport default function RootLayout({ children }) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <AuthProvider>\n          {/* Decorative pixelated corners for that retro UI feel */}\n          <div className=\"absolute top-0 left-0 w-12 h-12 border-t-4 border-l-4 border-pink-500\"></div>\n          <div className=\"absolute top-0 right-0 w-12 h-12 border-t-4 border-r-4 border-pink-500\"></div>\n          <div className=\"absolute bottom-0 left-0 w-12 h-12 border-b-4 border-l-4 border-pink-500\"></div>\n          <div className=\"absolute bottom-0 right-0 w-12 h-12 border-b-4 border-r-4 border-pink-500\"></div>\n          {/* Pages demonstrated by the children */}\n          {children}\n        </AuthProvider>\n      </body>\n    </html>\n  );\n}"],"names":[],"mappings":"AAAA,gBAAgB;;;;;AAGhB;AAFA;;;;AAKe,SAAS,WAAW,EAAE,QAAQ,EAAE;IAC7C,qBACE,6LAAC;QAAK,MAAK;kBACT,cAAA,6LAAC;sBACC,cAAA,6LAAC,0HAAA,CAAA,eAAY;;kCAEX,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;oBAEd;;;;;;;;;;;;;;;;;AAKX;KAhBwB","debugId":null}}]
}