{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/graceli/Documents/Dev/PaperProtoTwo/PaperProto/utils/claude-api.js"],"sourcesContent":["// utils/claude-api.js\n\n/**\n * Sends a message to Claude API with proper handling for text and image content\n * @param {Array} messages - The conversation history\n * @param {String} systemPrompt - The system prompt for Claude\n * @returns {Promise} - Claude's response\n */\nexport async function sendMessageToClaude(messages, systemPrompt) {\n    try {\n      // Validate any image URLs to ensure they're accessible\n      for (const message of messages) {\n        if (Array.isArray(message.content)) {\n          for (const contentBlock of message.content) {\n            if (contentBlock.type === 'image' && \n                contentBlock.source && \n                contentBlock.source.type === 'url') {\n              try {\n                // Try fetching the image to verify it's accessible\n                const imageResponse = await fetch(contentBlock.source.url, { method: 'HEAD' });\n                if (!imageResponse.ok) {\n                  console.error(`Image URL not accessible: ${contentBlock.source.url}`, imageResponse.status);\n                }\n              } catch (imgError) {\n                console.error(`Error verifying image URL: ${contentBlock.source.url}`, imgError);\n              }\n            }\n          }\n        }\n      }\n  \n      // Prepare the request body\n      const requestBody = {\n        model: \"claude-3-7-sonnet-20250219\",\n        max_tokens: 16000,\n        system: systemPrompt,\n        messages: messages\n      };\n  \n      console.log('Sending to Claude:', JSON.stringify(requestBody, null, 2));\n  \n      // Send the request to your API route that handles the Claude API call\n      const response = await fetch('/api/claude', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(requestBody),\n      });\n  \n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(`Claude API error: ${errorData.error || response.statusText}`);\n      }\n  \n      return await response.json();\n    } catch (error) {\n      console.error('Error calling Claude API:', error);\n      throw error;\n    }\n  }"],"names":[],"mappings":"AAAA,sBAAsB;AAEtB;;;;;CAKC;;;AACM,eAAe,oBAAoB,QAAQ,EAAE,YAAY;IAC5D,IAAI;QACF,uDAAuD;QACvD,KAAK,MAAM,WAAW,SAAU;YAC9B,IAAI,MAAM,OAAO,CAAC,QAAQ,OAAO,GAAG;gBAClC,KAAK,MAAM,gBAAgB,QAAQ,OAAO,CAAE;oBAC1C,IAAI,aAAa,IAAI,KAAK,WACtB,aAAa,MAAM,IACnB,aAAa,MAAM,CAAC,IAAI,KAAK,OAAO;wBACtC,IAAI;4BACF,mDAAmD;4BACnD,MAAM,gBAAgB,MAAM,MAAM,aAAa,MAAM,CAAC,GAAG,EAAE;gCAAE,QAAQ;4BAAO;4BAC5E,IAAI,CAAC,cAAc,EAAE,EAAE;gCACrB,QAAQ,KAAK,CAAC,CAAC,0BAA0B,EAAE,aAAa,MAAM,CAAC,GAAG,EAAE,EAAE,cAAc,MAAM;4BAC5F;wBACF,EAAE,OAAO,UAAU;4BACjB,QAAQ,KAAK,CAAC,CAAC,2BAA2B,EAAE,aAAa,MAAM,CAAC,GAAG,EAAE,EAAE;wBACzE;oBACF;gBACF;YACF;QACF;QAEA,2BAA2B;QAC3B,MAAM,cAAc;YAClB,OAAO;YACP,YAAY;YACZ,QAAQ;YACR,UAAU;QACZ;QAEA,QAAQ,GAAG,CAAC,sBAAsB,KAAK,SAAS,CAAC,aAAa,MAAM;QAEpE,sEAAsE;QACtE,MAAM,WAAW,MAAM,MAAM,eAAe;YAC1C,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,MAAM,IAAI,MAAM,CAAC,kBAAkB,EAAE,UAAU,KAAK,IAAI,SAAS,UAAU,EAAE;QAC/E;QAEA,OAAO,MAAM,SAAS,IAAI;IAC5B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///Users/graceli/Documents/Dev/PaperProtoTwo/PaperProto/components/ChatInterface.js"],"sourcesContent":["\"use client\"\n// components/ChatInterface.js\n\nimport { useState, useEffect, useRef } from 'react';\nimport { sendMessageToClaude } from '../utils/claude-api';\nimport NextImage from 'next/image';\n\nconst initialMessages = [\n  {\n    role: 'assistant',\n    content: \"Hi there! I'm Claude, your game development assistant. What kind of game would you like me to build for you today?\"\n  }\n];\n\nexport default function ChatInterface({ onGameRequest, setLoading }) {\n  const [messages, setMessages] = useState(initialMessages);\n  const [input, setInput] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [currentGameType, setCurrentGameType] = useState(null);\n  const [currentGameCode, setCurrentGameCode] = useState(null);\n  const [developmentStep, setDevelopmentStep] = useState(0);\n  const [gameSteps, setGameSteps] = useState([]);\n  const [uploadedImages, setUploadedImages] = useState([]);\n  const [showImageUpload, setShowImageUpload] = useState(false);\n  const fileInputRef = useRef(null);\n  const messagesEndRef = useRef(null);\n\n  // Auto-scroll to bottom when messages change\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  // Pass updated game code to parent when it changes\n  useEffect(() => {\n    if (currentGameType && currentGameCode) {\n      onGameRequest(currentGameType, currentGameCode);\n    }\n  }, [currentGameType, currentGameCode, onGameRequest]);\n\n  /**\n   * Compress an image file by resizing and lowering quality\n   * @param {File} file\n   * @returns {Promise<File>}\n   */\n  const compressImage = (file) => {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.src = URL.createObjectURL(file);\n      img.onload = () => {\n        // Adjust max dimensions as needed\n        const maxWidth = 1024;\n        const scale = img.width > maxWidth ? maxWidth / img.width : 1;\n        const canvas = document.createElement('canvas');\n        canvas.width = img.width * scale;\n        canvas.height = img.height * scale;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n        canvas.toBlob(\n          (blob) => {\n            if (!blob) {\n              reject(new Error('Compression failed: blob is null'));\n              return;\n            }\n            const compressedFile = new File([blob], file.name, {\n              type: 'image/jpeg',\n              lastModified: Date.now(),\n            });\n            resolve(compressedFile);\n          },\n          'image/jpeg',\n          0.7 // quality between 0 and 1\n        );\n      };\n      img.onerror = (err) => reject(err);\n    });\n  };\n\n  // Handle file selection with compression\n  const handleFileSelect = (e) => {\n    const files = Array.from(e.target.files);\n    const imageFiles = files.filter(file => file.type.startsWith('image/'));\n  \n    if (imageFiles.length === 0) return;\n  \n    const newUploadedImages = [...uploadedImages];\n  \n    imageFiles.forEach(file => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const img = new Image();\n        img.onload = () => {\n          const canvas = document.createElement('canvas');\n  \n          // Resize to max dimension 128px for even smaller size\n          const maxDim = 128;\n          let width = img.width;\n          let height = img.height;\n  \n          if (width > height) {\n            if (width > maxDim) {\n              height *= maxDim / width;\n              width = maxDim;\n            }\n          } else {\n            if (height > maxDim) {\n              width *= maxDim / height;\n              height = maxDim;\n            }\n          }\n  \n          canvas.width = width;\n          canvas.height = height;\n  \n          const ctx = canvas.getContext('2d');\n          ctx.drawImage(img, 0, 0, width, height);\n  \n          // Convert to base64 JPEG at 25% quality for smaller size\n          const compressedDataUrl = canvas.toDataURL('image/jpeg', 0.25);\n          \n          // Log the size for debugging\n          console.log(`Image compressed. Size: ~${Math.round(compressedDataUrl.length / 1024)}KB`);\n          \n          // Store the full data URL\n          newUploadedImages.push(compressedDataUrl);\n          setUploadedImages([...newUploadedImages]);\n        };\n        img.src = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n  \n  // Handle file upload button click\n  const handleUploadClick = () => {\n    fileInputRef.current.click();\n  };\n\n  // Remove an uploaded image\n  const removeImage = (index) => {\n    const newImages = [...uploadedImages];\n    newImages.splice(index, 1);\n    setUploadedImages(newImages);\n  };\n\n  // Toggle image upload section\n  const toggleImageUpload = () => {\n    setShowImageUpload(!showImageUpload);\n  };\n\n  const processGameRequest = async (userMessage, imageUrls = []) => {\n    setLoading(true);\n    console.log(\"Processing user message:\", userMessage);\n    console.log(\"With images:\", imageUrls.length);\n    \n    // Debug image sizes if any\n    if (imageUrls.length > 0) {\n      console.log(\"Image sizes:\");\n      imageUrls.forEach((img, idx) => {\n        console.log(`Image ${idx+1}: ~${Math.round(img.length / 1024)}KB`);\n      });\n    }\n  \n    // 1. Add user message with any attached images\n    // Ensure text is never empty - add default text if user didn't provide any\n    const messageText = userMessage.trim() || (imageUrls.length > 0 ? \"Make a game based on this image.\" : \"Make me a game.\");\n    \n    // Create user message object - only add hasImages property when there are images\n    let userMessageObj = { \n      role: 'user'\n    };\n    \n    if (imageUrls.length > 0) {\n      userMessageObj.content = { text: messageText, images: imageUrls };\n      userMessageObj.hasImages = true;\n    } else {\n      userMessageObj.content = messageText;\n      // Don't add hasImages property for text-only messages\n    }\n    \n    const updatedMessages = [...messages, userMessageObj];\n    \n    setMessages(updatedMessages);\n    setInput('');\n    setIsTyping(true);\n    setUploadedImages([]);\n  \n    try {\n      // 2. Build system prompt based on current development step\n      const systemPrompt = buildSystemPrompt(messageText, developmentStep);\n  \n      // 3. Send to Claude - include ALL text messages but optimize code messages\n      // Create a copy of messages to modify for sending to Claude\n      const messagesForClaude = updatedMessages.map((message, index) => {\n        // If this is a user message with code, keep it as is\n        if (message.role === 'user') {\n          return {\n            role: message.role,\n            content: message.content,\n            hasImages: message.hasImages || false\n          };\n        }\n        \n        // For assistant messages, we need to check for code blocks\n        const isCodeMessage = message.content && \n          (message.content.includes('---GAME_CODE_START---') || \n           (typeof message.content === 'string' && message.content.includes('```')));\n        \n        // If this is a code message but NOT the most recent one, remove the code\n        if (isCodeMessage && index < updatedMessages.length - 1) {\n          // Keep the conversation text but remove code blocks\n          const strippedContent = typeof message.content === 'string' \n            ? message.content\n                .replace(/---GAME_TYPE_START---[\\s\\S]*?---GAME_TYPE_END---/g, '[Game Type Omitted]')\n                .replace(/---GAME_CODE_START---[\\s\\S]*?---GAME_CODE_END---/g, '[Code Omitted]')\n                .replace(/---GAME_STEPS_START---[\\s\\S]*?---GAME_STEPS_END---/g, '[Steps Omitted]')\n                .replace(/```[\\s\\S]*?```/g, '[Code Block Omitted]')\n            : message.content;\n            \n          return {\n            role: message.role,\n            content: strippedContent\n          };\n        }\n        \n        // For all other messages (including the most recent code message), keep as is\n        return {\n          role: message.role,\n          content: message.content\n        };\n      });\n      \n      // We don't handle image messages here, that's now done on the server side\n      \n      const response = await sendMessageToClaude(messagesForClaude, systemPrompt);\n      const claudeResponse = response.content[0].text;\n      console.log(\"Claude response received, length:\", claudeResponse.length);\n  \n      // 4. Extract conversation text by removing the marker blocks\n      const conversationResponse = claudeResponse\n        .replace(/---GAME_TYPE_START---[\\s\\S]*?---GAME_TYPE_END---/g, '')\n        .replace(/---GAME_CODE_START---[\\s\\S]*?---GAME_CODE_END---/g, '')\n        .replace(/---GAME_STEPS_START---[\\s\\S]*?---GAME_STEPS_END---/g, '')\n        .trim();\n  \n      // 5. Extract game type, steps, and code from Claude's response\n      let gameType = currentGameType;\n      let gameCode = currentGameCode;\n      let extractedSteps = gameSteps;\n      \n      // Extract game type if present\n      const typeMatch = claudeResponse.match(/---GAME_TYPE_START---([\\s\\S]*?)---GAME_TYPE_END---/);\n      if (typeMatch?.[1]) {\n        gameType = typeMatch[1].trim();\n        setCurrentGameType(gameType);\n      }\n  \n      // Extract game steps if present\n      const stepsMatch = claudeResponse.match(/---GAME_STEPS_START---([\\s\\S]*?)---GAME_STEPS_END---/);\n      if (stepsMatch?.[1]) {\n        extractedSteps = stepsMatch[1].trim().split('\\n');\n        setGameSteps(extractedSteps);\n      }\n  \n      // Extract code if present\n      const codeMatch = claudeResponse.match(/---GAME_CODE_START---([\\s\\S]*?)---GAME_CODE_END---/);\n      if (codeMatch?.[1]) {\n        // Only store the latest version of the code\n        gameCode = codeMatch[1].trim();\n        setCurrentGameCode(gameCode);\n      }\n  \n      // 6. Determine new development step\n      if (developmentStep === 0 && gameType && gameCode) {\n        // First time setup completed - move to improvement cycle\n        setDevelopmentStep(1);\n      } else if (developmentStep > 0 && gameCode !== currentGameCode) {\n        // User has requested improvements and we have new code\n        // Stay in improvement cycle (step 1)\n        setDevelopmentStep(1);\n      }\n  \n      // 7. Append Claude's reply if non-empty - only store the display text\n      if (conversationResponse) {\n        // To save on tokens, potentially trim older messages if the chat gets too long\n        let newMessages = [...updatedMessages];\n        if (newMessages.length > 10) {\n          // Keep only the latest messages to prevent token bloat\n          newMessages = [\n            initialMessages[0], // Keep the initial assistant greeting\n            ...newMessages.slice(-9) // And the last 9 messages (to make 10 total with the new one)\n          ];\n        }\n        \n        // Add the new assistant message\n        newMessages.push({ role: 'assistant', content: conversationResponse });\n        setMessages(newMessages);\n      } else {\n        console.warn('Skipping empty assistant message');\n      }\n  \n    } catch (error) {\n      console.error('Error processing game request:', error);\n      setMessages([\n        ...updatedMessages,\n        {\n          role: 'assistant',\n          content: \"I'm sorry, I encountered an error while processing your request. Please try again.\"\n        }\n      ]);\n    } finally {\n      setIsTyping(false);\n      setLoading(false);\n    }\n  };\n\n  // Build system prompt based on current development state\n  const buildSystemPrompt = (userMessage, step) => {\n    // Initial setup - complete game implementation\n    if (step === 0) {\n      return `You are a friendly and very skilled game development assistant that makes beautiful, delightful computer games in the browser.\nYou co-create games with the user by providing complete implementations and iteratively improving them.\n\n—––– COMPLETE IMPLEMENTATION –––—\n1. Read the user's request carefully and mentally break it down into 3-5 logical steps.\n2. DO NOT share these steps with the user. They are only for your internal planning.\n3. Implement the COMPLETE game in one go, making sure it's fully functional.\n4. Wrap your answer in these markers:\n\n---GAME_TYPE_START---\n[game name]\n---GAME_TYPE_END---\n\n---GAME_STEPS_START---\nStep 1: [brief description]\nStep 2: [brief description]\nStep 3: [brief description]\n[additional steps if necessary]\n---GAME_STEPS_END---\n\n---GAME_CODE_START---\n[complete, runnable HTML+CSS+JS code for the full game]\n---GAME_CODE_END---\n\n5. Ask the user if they would like any specific improvements to the game.\n\nIMPORTANT:\n- Keep your explanations concise and focus on what the game does\n- Never include sound effects\n- Ensure your code is fully runnable in a browser\n- Make sure the code does not exceed size limitations\n- Never reference external images, create all of your own images\n- If the user does not ask for a specific style, pick a fun fitting style with animations\n- If the user just attaches an image and doesnt specify what game, it is atari breakout\n- Never end your responses with a colon`;\n    }\n    \n    // Improvement cycle - refine based on user feedback\n    else {\n      return `You are a friendly and very skilled game development assistant that makes beautiful, delightful computer games in the browser.\nYou co-create games with the user by providing complete implementations and iteratively improving them.\n\n—––– IMPROVEMENT CYCLE –––—\n1. The user has provided feedback on your implementation.\n2. Carefully incorporate their requested changes while keeping the core game intact.\n3. Wrap your answer in:\n\n---GAME_TYPE_START---\n[game name]\n---GAME_TYPE_END---\n\n---GAME_CODE_START---\n[improved, runnable HTML+CSS+JS code for the complete game]\n---GAME_CODE_END---\n\n4. Ask the user if they'd like any additional improvements.\n\nIMPORTANT:\n- Keep your explanations concise\n- Ensure the code remains fully runnable in a browser\n- Make sure the code does not exceed size limitations\n- Never reference external images, create all of your own images\n- Never end your responses with a colon`;\n    }\n  };\n\n  // Handle form submission\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (input.trim() === '' && uploadedImages.length === 0) return;\n    processGameRequest(input, uploadedImages);\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-gray-900\">\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {messages.map((message, index) => (\n          <div\n            key={index}\n            className={`flex ${message.role === 'assistant' ? 'justify-start' : 'justify-end'}`}\n          >\n            <div\n              className={`max-w-[85%] p-3 rounded-lg pixel-border ${\n                message.role === 'assistant'\n                  ? 'bg-gray-800 text-indigo-200'\n                  : 'bg-indigo-700 text-gray-100'\n              }`}\n            >\n              {/* Handle messages with images */}\n              {message.hasImages && typeof message.content === 'object' ? (\n                <div>\n                  <div className=\"mb-2 font-pixelify\">{message.content.text}</div>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {message.content.images.map((img, imgIndex) => (\n                      <div key={imgIndex} className=\"border border-indigo-500 rounded overflow-hidden pixel-border\">\n                        <NextImage \n                          src={img} \n                          alt={`Uploaded image ${imgIndex + 1}`} \n                          width={150} \n                          height={150}\n                          className=\"object-cover\"\n                        />\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"font-pixelify\">{message.content}</div>\n              )}\n            </div>\n          </div>\n        ))}\n\n        {isTyping && (\n          <div className=\"flex justify-start\">\n            <div className=\"max-w-[85%] p-3 rounded-lg bg-gray-800 text-indigo-200 pixel-border\">\n              <div className=\"flex space-x-2\">\n                <div className=\"w-3 h-3 bg-pink-500 rounded-full animate-bounce\"></div>\n                <div className=\"w-3 h-3 bg-indigo-500 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n                <div className=\"w-3 h-3 bg-pink-500 rounded-full animate-bounce\" style={{ animationDelay: '0.4s' }}></div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div ref={messagesEndRef} />\n      </div>\n\n      <div className=\"p-4 border-t border-gray-700 bg-gray-800\">\n        <form onSubmit={handleSubmit} className=\"space-y-2\">\n          {/* Image upload section */}\n          <div className=\"flex justify-between items-center mb-2\">\n            <button \n              type=\"button\" \n              onClick={toggleImageUpload}\n              className=\"text-pink-400 hover:text-pink-300 text-sm flex items-center bg-gray-700 px-3 py-1 rounded pixel-border retro-text\"\n            >\n              {showImageUpload ? \"Hide Drawings\" : \"Add Drawings\"}\n            </button>\n            {uploadedImages.length > 0 && (\n              <div className=\"text-xs text-indigo-300 retro-text\">\n                {uploadedImages.length} image{uploadedImages.length > 1 ? 's' : ''} added\n              </div>\n            )}\n          </div>\n          \n          {showImageUpload && (\n            <div className=\"mb-3 bg-gray-700 p-3 rounded pixel-border\">\n              <input\n                type=\"file\"\n                ref={fileInputRef}\n                onChange={handleFileSelect}\n                accept=\"image/*\"\n                multiple\n                className=\"hidden\"\n              />\n              <div className=\"flex flex-wrap gap-2 mb-2\">\n                {uploadedImages.map((img, index) => (\n                  <div key={index} className=\"relative inline-block\">\n                    <div className=\"w-16 h-16 border border-indigo-500 rounded overflow-hidden pixel-border\">\n                      <NextImage\n                        src={img} \n                        alt={`Uploaded ${index}`} \n                        width={64} \n                        height={64} \n                        className=\"object-cover w-full h-full\"\n                      />\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() => removeImage(index)}\n                      className=\"absolute -top-1 -right-1 bg-pink-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs\"\n                    >\n                      ×\n                    </button>\n                  </div>\n                ))}\n                {uploadedImages.length < 3 && (\n                  <button\n                    type=\"button\"\n                    onClick={handleUploadClick}\n                    className=\"w-16 h-16 border-2 border-dashed border-indigo-500 rounded flex items-center justify-center text-indigo-400 hover:text-pink-400 hover:border-pink-400 pixel-border\"\n                  >\n                    <span className=\"text-2xl\">+</span>\n                  </button>\n                )}\n              </div>\n            </div>\n          )}\n          \n          {/* Message input and send button */}\n          <div className=\"flex pt-2\">\n            <input\n              type=\"text\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              placeholder={\n                currentGameType\n                  ? \"Any changes?\"\n                  : \"What game would you like to build?\"\n              }\n              className=\"flex-1 p-2 border-2 border-indigo-600 bg-gray-700 rounded-l-lg text-white focus:outline-none focus:border-pink-500 font-pixelify pixel-border\"\n            />\n            <button\n              type=\"submit\"\n              disabled={isTyping}\n              className={`px-4 py-2 rounded-r-lg focus:outline-none retro-text ${\n                isTyping \n                  ? 'bg-indigo-700 text-gray-300' \n                  : 'bg-indigo-600 hover:bg-pink-600 text-white'\n              } pixel-border`}\n            >\n              SEND\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 738, "column": 0}, "map": {"version":3,"sources":["file:///Users/graceli/Documents/Dev/PaperProtoTwo/PaperProto/components/DinoGame.js"],"sourcesContent":["// components/DinoGame.js\n\"use client\";\nimport { useEffect, useRef } from \"react\";\n\nexport default function DinoGame() {\n  const containerRef = useRef(null);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    container.innerHTML = \"\";\n\n    // create sandboxed iframe\n    const iframe = document.createElement(\"iframe\");\n    Object.assign(iframe.style, {\n      width: \"100%\",\n      height: \"100%\",\n      border: \"none\",\n    });\n    iframe.allow = \"accelerometer; autoplay\";\n    iframe.title = \"Dino Game\";\n    container.appendChild(iframe);\n\n    const doc = iframe.contentDocument || iframe.contentWindow.document;\n    doc.open();\n    doc.write(`<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <base href=\"/\" />\n  <meta charset=\"utf-8\"/>\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/>\n  <link\n    href=\"https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap\"\n    rel=\"stylesheet\"\n  />\n  <style>\n    :root {\n      --bg: #171717;\n      --fg: #ededed;\n      --accent: #EC4899;\n      --border: #6366F1;\n      --shadow: #2D3748;\n    }\n    html, body {\n      margin: 0; padding: 0;\n      width: 100%; height: 100%;\n      background: var(--bg);\n      font-family: 'Press Start 2P', cursive;\n      overflow: hidden;\n    }\n    .game-container {\n      position: relative;\n      width: 900px;    /* 600×1.5 */\n      height: 300px;   /* taller */\n      margin: auto;\n      top: 50%; transform: translateY(-50%);\n      background: #222;\n      border: 4px solid var(--border);\n      box-shadow: 4px 4px 0 var(--shadow), -4px -4px 0 var(--shadow);\n      border-radius: 4px;\n      overflow: hidden;\n      image-rendering: pixelated;\n    }\n    .score {\n      position: absolute;\n      top: 8px; left: 50%;\n      transform: translateX(-50%);\n      color: var(--accent);\n      text-shadow: 1px 1px 0 var(--border);\n      font-size: 16px;\n    }\n    .ground {\n      position: absolute;\n      bottom: 0; width: 100%; height: 3px;\n      background: var(--fg);\n    }\n    /* console.png as player, mirrored */\n    #dino {\n      position: absolute;\n      bottom: 0; left: 100px;\n      width: 66px;   /* 44×1.5 */\n      height: 70px;  /* 47×1.5 */\n      background: url('/console.png') no-repeat center/contain;\n      transform: scaleX(-1);\n    }\n    .cactus {\n      position: absolute;\n      bottom: 0;\n      width: 25px;   /* ~17×1.5 */\n      background: var(--accent);\n    }\n    .cloud {\n      position: absolute;\n      width: 70px;   /* ~46×1.5 */\n      height: 20px;  /* ~14×1.5 */\n      background: var(--fg);\n      opacity: 0.4;\n      border-radius: 50%;\n    }\n    .start-message,\n    .game-over {\n      position: absolute;\n      left: 50%; transform: translateX(-50%);\n      color: var(--accent);\n      text-shadow: 1px 1px 0 var(--border);\n      text-align: center;\n      font-size: 14px;\n    }\n    .start-message {\n      top: 50%; transform: translate(-50%, -80px);\n    }\n    .game-over {\n      top: 50%; transform: translate(-50%, -50%);\n      display: none;\n      font-size: 16px;\n    }\n    .restart-btn {\n      display: block;\n      margin: 8px auto 0;\n      padding: 6px 12px;\n      background: var(--border);\n      color: #fff;\n      border: none;\n      box-shadow: 2px 2px 0 var(--shadow);\n      font-family: 'Press Start 2P', cursive;\n      cursor: pointer;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"game-container\">\n    <div class=\"score\">Score: 0</div>\n    <div class=\"ground\"></div>\n    <div id=\"dino\"></div>\n    <div class=\"start-message\">PRESS SPACE OR TAP TO JUMP</div>\n    <div class=\"game-over\">\n      GAME OVER\n      <button class=\"restart-btn\">RESTART</button>\n    </div>\n  </div>\n  <script>\n    document.addEventListener('DOMContentLoaded', () => {\n      const dino      = document.getElementById('dino');\n      const container = document.querySelector('.game-container');\n      const scoreEl   = document.querySelector('.score');\n      const overEl    = document.querySelector('.game-over');\n      const startEl   = document.querySelector('.start-message');\n      const btn       = document.querySelector('.restart-btn');\n\n      // physics & state\n      let pos = 0,\n          vel = 0,\n          gravity = 0.5,       // slower falling\n          speed = 5,\n          score = 0,\n          jumpsRemaining = 2,\n          started = false,\n          over = false;\n\n      const cacti = [];\n      const clouds = [];\n\n      function jump() {\n        if (over || jumpsRemaining === 0) return;\n        if (!started) {\n          started = true;\n          startEl.style.display = 'none';\n          loop();\n        }\n        vel = 12;\n        jumpsRemaining--;\n      }\n\n      function spawnCactus() {\n        if (over) return;\n        setTimeout(() => {\n          if (over) return;\n          const c = document.createElement('div');\n          c.className = 'cactus';\n          // random height 60–110px\n          const h = Math.random() * 60 + 60;\n          c.style.height = h + 'px';\n          container.appendChild(c);\n          c.style.left = '900px';\n          cacti.push(c);\n          moveObstacle(c);\n          spawnCactus();\n        }, Math.random() * 3000 + 1000);\n      }\n\n      function spawnCloud() {\n        if (over) return;\n        setTimeout(() => {\n          if (over) return;\n          const cl = document.createElement('div');\n          cl.className = 'cloud';\n          container.appendChild(cl);\n          cl.style.left = '900px';\n          cl.style.top = (Math.random() * 200 + 20) + 'px';\n          clouds.push(cl);\n          moveCloud(cl);\n          spawnCloud();\n        }, Math.random() * 3000 + 2000);\n      }\n\n      function moveObstacle(el) {\n        let x = 900;\n        const ti = setInterval(() => {\n          if (over) return clearInterval(ti);\n          x -= speed;\n          el.style.left = x + 'px';\n          // collision zone\n          if (x < 166 && x + el.offsetWidth > 100 && pos < 10) {\n            return gameOver(ti);\n          }\n          if (x < -30) {\n            el.remove();\n            clearInterval(ti);\n            score++;\n            scoreEl.textContent = 'Score: ' + score;\n            if (score % 10 === 0 && speed < 15) speed += 1;\n          }\n        }, 20);\n      }\n\n      function moveCloud(el) {\n        let x = 900;\n        const sp = speed * 0.3;\n        const ti = setInterval(() => {\n          if (over) return clearInterval(ti);\n          x -= sp;\n          el.style.left = x + 'px';\n          if (x < -50) {\n            el.remove();\n            clearInterval(ti);\n          }\n        }, 20);\n      }\n\n      function loop() {\n        // apply physics\n        pos += vel;\n        vel -= gravity;\n        if (pos <= 0) {\n          pos = 0;\n          vel = 0;\n          jumpsRemaining = 2;\n        }\n        dino.style.bottom = pos + 'px';\n        if (!over) requestAnimationFrame(loop);\n      }\n\n      function gameOver(ti) {\n        over = true;\n        overEl.style.display = 'block';\n        clearInterval(ti);\n      }\n\n      function restart() {\n        // clear existing obstacles & clouds\n        cacti.forEach(c => c.remove());\n        clouds.forEach(c => c.remove());\n        cacti.length = 0;\n        clouds.length = 0;\n\n        // reset state\n        pos = 0; vel = 0; gravity = 0.5;\n        speed = 5; score = 0;\n        jumpsRemaining = 2;\n        started = false; over = false;\n\n        scoreEl.textContent = 'Score: 0';\n        overEl.style.display = 'none';\n        startEl.style.display = 'block';\n        dino.style.bottom = '0px';\n\n        // restart spawns\n        spawnCactus();\n        spawnCloud();\n      }\n\n      // initial spawns\n      spawnCactus();\n      spawnCloud();\n\n      // input\n      document.addEventListener('keydown', e => {\n        if (e.code === 'Space') {\n          e.preventDefault();\n          over ? restart() : jump();\n        }\n      });\n      document.addEventListener('touchstart', e => {\n        e.preventDefault();\n        over ? restart() : jump();\n      });\n      btn.addEventListener('click', restart);\n    });\n  </script>\n</body>\n</html>`);\n    doc.close();\n\n    return () => {\n      container.innerHTML = \"\";\n    };\n  }, []);\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"w-full h-full pixel-border crt-on scanline\"\n    />\n  );\n}\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AAEzB;AADA;;;AAGe,SAAS;IACtB,MAAM,eAAe,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAE;IAE5B,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,YAAY,aAAa,OAAO;QACtC,UAAU,SAAS,GAAG;QAEtB,0BAA0B;QAC1B,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,OAAO,MAAM,CAAC,OAAO,KAAK,EAAE;YAC1B,OAAO;YACP,QAAQ;YACR,QAAQ;QACV;QACA,OAAO,KAAK,GAAG;QACf,OAAO,KAAK,GAAG;QACf,UAAU,WAAW,CAAC;QAEtB,MAAM,MAAM,OAAO,eAAe,IAAI,OAAO,aAAa,CAAC,QAAQ;QACnE,IAAI,IAAI;QACR,IAAI,KAAK,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAmRR,CAAC;QACJ,IAAI,KAAK;QAET,OAAO;YACL,UAAU,SAAS,GAAG;QACxB;IACF,GAAG,EAAE;IAEL,qBACE,8OAAC;QACC,KAAK;QACL,WAAU;;;;;;AAGhB","debugId":null}},
    {"offset": {"line": 1060, "column": 0}, "map": {"version":3,"sources":["file:///Users/graceli/Documents/Dev/PaperProtoTwo/PaperProto/components/GameDisplay.js"],"sourcesContent":["\"use client\"\n// components/GameDisplay.js\n\nimport { useState, useEffect, useRef } from 'react';\nimport DinoGame from './DinoGame';\n\nexport default function GameDisplay({ gameCode, gameType, loading }) {\n  const [gameTitle, setGameTitle] = useState('');\n  const gameContainerRef = useRef(null);\n  const iframeRef = useRef(null);\n\n  // Update display title when gameType changes\n  useEffect(() => {\n    if (gameType) {\n      const formattedType = gameType\n        .split('-')\n        .map(w => w.charAt(0).toUpperCase() + w.slice(1))\n        .join(' ');\n      setGameTitle(formattedType);\n    }\n  }, [gameType]);\n\n  // Render the generated game into an iframe\n  useEffect(() => {\n    if (!gameCode || !gameContainerRef.current) return;\n\n    try {\n      // Clear previous content\n      gameContainerRef.current.innerHTML = '';\n      if (iframeRef.current) iframeRef.current.remove();\n\n      // Create sandbox iframe\n      const iframe = document.createElement('iframe');\n      iframe.style.width = '100%';\n      iframe.style.height = '100%';\n      iframe.style.border = 'none';\n      iframe.allow = 'accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture';\n      iframe.title = gameTitle || 'Game';\n\n      iframeRef.current = iframe;\n      gameContainerRef.current.appendChild(iframe);\n\n      // Extract HTML, CSS, JS from the generated code\n      let htmlContent = '', cssContent = '', jsContent = '';\n      const htmlMatch = gameCode.match(/<html[^>]*>([\\s\\S]*)<\\/html>/i);\n      const bodyMatch = gameCode.match(/<body[^>]*>([\\s\\S]*)<\\/body>/i);\n      const cssMatch  = gameCode.match(/<style[^>]*>([\\s\\S]*)<\\/style>/i);\n      const jsMatch   = gameCode.match(/<script[^>]*>([\\s\\S]*)<\\/script>/i);\n\n      if (htmlMatch) htmlContent = htmlMatch[1];\n      else if (bodyMatch) htmlContent = bodyMatch[1];\n      else htmlContent = gameCode;\n\n      if (cssMatch) cssContent = cssMatch[1];\n      if (jsMatch)  jsContent  = jsMatch[1];\n\n      // Write into iframe with dark theme\n      setTimeout(() => {\n        const doc = iframe.contentDocument;\n        doc.open();\n        doc.write(`\n          <!DOCTYPE html>\n          <html>\n          <head>\n            <meta charset=\"utf-8\">\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n            <title>${gameTitle || 'Game'}</title>\n            <link href=\"https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Pixelify+Sans:wght@400..700&display=swap\" rel=\"stylesheet\">\n            <style>\n              body {\n                margin:0; padding:0;\n                overflow:hidden;\n                display:flex; justify-content:center; align-items:center;\n                width:100%; height:100%;\n                background-color: #161B22;\n                color: #FFFFFF;\n                font-family: 'Pixelify Sans', sans-serif;\n              }\n              ${cssContent}\n            </style>\n          </head>\n          <body>\n            ${htmlContent}\n            <script>\n              // Track image loading\n              const OriginalImage = window.Image;\n              const promises = [];\n              window.Image = function() {\n                const img = new OriginalImage();\n                promises.push(new Promise(r => {\n                  img.onload = r;\n                  img.onerror = r;\n                }));\n                return img;\n              };\n\n              Promise.all(promises).finally(() => {\n                // Run any exposed game loops\n                [window.gameLoop, window.update, window.animate, window.draw, window.render, window.loop]\n                  .filter(fn => typeof fn === 'function')\n                  .forEach(fn => { try { fn(); } catch(e){} });\n              });\n\n              ${jsContent}\n            </script>\n          </body>\n          </html>\n        `);\n        doc.close();\n      }, 0);\n\n    } catch (error) {\n      console.error('Error rendering game:', error);\n      gameContainerRef.current.innerHTML = `\n        <div class=\"p-4 bg-indigo-900 text-red-300 rounded-lg pixel-border\">\n          <p class=\"font-bold retro-text text-sm\">Error rendering game:</p>\n          <p>${error.message}</p>\n        </div>\n      `;\n    }\n  }, [gameCode, gameTitle]);\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"flex-1 flex items-center justify-center bg-gray-900 p-2\">\n        {loading ? (\n          <div className=\"relative w-full h-full flex flex-col\">\n            {/* Dino fallback */}\n            <div className=\"flex-1 w-full h-full pixel-border rounded-lg overflow-hidden bg-gray-800 crt-on\">\n              <DinoGame />\n            </div>\n            {/* Loading message */}\n            <div className=\"absolute bottom-30 left-0 right-0 text-center\">\n              {/* <p className=\"text-lg font-medium retro-text text-indigo-300\">\n                Play while we cook!\n              </p> */}\n            </div>\n          </div>\n        ) : gameCode ? (\n          <div\n            ref={gameContainerRef}\n            className=\"w-full h-full flex items-center justify-center overflow-auto pixel-border rounded-lg bg-gray-800 crt-on\"\n          />\n        ) : (\n          <div className=\"text-center max-w-md bg-gray-800 p-8 rounded-lg pixel-border crt-on\">\n            <p className=\"text-lg font-medium retro-text text-indigo-300 mb-2\">\n              What would you like to play?\n            </p>\n            <p className=\"text-sm text-pink-400 font-normal\">\n              Describe your game and I will create it for you!\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AACA,4BAA4B;AAE5B;AACA;AAJA;;;;AAMe,SAAS,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAAE,OAAO,EAAE;IACjE,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,mBAAmB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAE;IAChC,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAE;IAEzB,6CAA6C;IAC7C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,UAAU;YACZ,MAAM,gBAAgB,SACnB,KAAK,CAAC,KACN,GAAG,CAAC,CAAA,IAAK,EAAE,MAAM,CAAC,GAAG,WAAW,KAAK,EAAE,KAAK,CAAC,IAC7C,IAAI,CAAC;YACR,aAAa;QACf;IACF,GAAG;QAAC;KAAS;IAEb,2CAA2C;IAC3C,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,YAAY,CAAC,iBAAiB,OAAO,EAAE;QAE5C,IAAI;YACF,yBAAyB;YACzB,iBAAiB,OAAO,CAAC,SAAS,GAAG;YACrC,IAAI,UAAU,OAAO,EAAE,UAAU,OAAO,CAAC,MAAM;YAE/C,wBAAwB;YACxB,MAAM,SAAS,SAAS,aAAa,CAAC;YACtC,OAAO,KAAK,CAAC,KAAK,GAAG;YACrB,OAAO,KAAK,CAAC,MAAM,GAAG;YACtB,OAAO,KAAK,CAAC,MAAM,GAAG;YACtB,OAAO,KAAK,GAAG;YACf,OAAO,KAAK,GAAG,aAAa;YAE5B,UAAU,OAAO,GAAG;YACpB,iBAAiB,OAAO,CAAC,WAAW,CAAC;YAErC,gDAAgD;YAChD,IAAI,cAAc,IAAI,aAAa,IAAI,YAAY;YACnD,MAAM,YAAY,SAAS,KAAK,CAAC;YACjC,MAAM,YAAY,SAAS,KAAK,CAAC;YACjC,MAAM,WAAY,SAAS,KAAK,CAAC;YACjC,MAAM,UAAY,SAAS,KAAK,CAAC;YAEjC,IAAI,WAAW,cAAc,SAAS,CAAC,EAAE;iBACpC,IAAI,WAAW,cAAc,SAAS,CAAC,EAAE;iBACzC,cAAc;YAEnB,IAAI,UAAU,aAAa,QAAQ,CAAC,EAAE;YACtC,IAAI,SAAU,YAAa,OAAO,CAAC,EAAE;YAErC,oCAAoC;YACpC,WAAW;gBACT,MAAM,MAAM,OAAO,eAAe;gBAClC,IAAI,IAAI;gBACR,IAAI,KAAK,CAAC,CAAC;;;;;;mBAMA,EAAE,aAAa,OAAO;;;;;;;;;;;;cAY3B,EAAE,WAAW;;;;YAIf,EAAE,YAAY;;;;;;;;;;;;;;;;;;;;;cAqBZ,EAAE,UAAU;;;;QAIlB,CAAC;gBACD,IAAI,KAAK;YACX,GAAG;QAEL,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;YACvC,iBAAiB,OAAO,CAAC,SAAS,GAAG,CAAC;;;aAG/B,EAAE,MAAM,OAAO,CAAC;;MAEvB,CAAC;QACH;IACF,GAAG;QAAC;QAAU;KAAU;IAExB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACZ,wBACC,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,sHAAA,CAAA,UAAQ;;;;;;;;;;kCAGX,8OAAC;wBAAI,WAAU;;;;;;;;;;;uBAMf,yBACF,8OAAC;gBACC,KAAK;gBACL,WAAU;;;;;qCAGZ,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCAAsD;;;;;;kCAGnE,8OAAC;wBAAE,WAAU;kCAAoC;;;;;;;;;;;;;;;;;;;;;;AAQ7D","debugId":null}},
    {"offset": {"line": 1258, "column": 0}, "map": {"version":3,"sources":["file:///Users/graceli/Documents/Dev/PaperProtoTwo/PaperProto/components/BottomNavigation.js"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport Image from 'next/image';\n\nconst BottomNavigation = () => {\n  const pathname = usePathname();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) {\n    return null;\n  }\n\n  const tabs = [\n    {\n      name: 'Community',\n      href: '/community',\n      iconSrc: '/arcade.png',\n      alt: 'Community Icon'\n    },\n    {\n      name: 'Create',\n      href: '/create',\n      iconSrc: '/console.png',\n      alt: 'Create Icon'\n    },\n    {\n      name: 'Profile',\n      href: '/profile',\n      iconSrc: '/profile.png',\n      alt: 'Profile Icon'\n    },\n  ];\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 h-16 bg-gray-900 border-t-4 border-indigo-600 flex items-center justify-around z-50 shadow-lg\">\n      {tabs.map((tab) => {\n        const isActive = pathname === tab.href || pathname.startsWith(`${tab.href}/`);\n\n        return (\n          <Link \n            key={tab.name}\n            href={tab.href}\n            className={`flex flex-col items-center justify-center w-full h-full transition-transform duration-200 hover:scale-110 ${\n              isActive \n                ? 'text-pink-500 relative after:content-[\"\"] after:absolute after:bottom-0 after:left-1/4 after:right-1/4 after:h-1' \n                : 'text-gray-400 hover:text-indigo-400'\n            }`}\n            style={{\n              textShadow: isActive ? '0px 0px 6px rgba(236, 72, 153, 0.6)' : 'none',\n            }}\n          >\n            <div className={`p-1 ${isActive ? 'bg-gray-700 rounded-md border-2 border-indigo-500' : ''}`}>\n              <Image\n                src={tab.iconSrc}\n                alt={tab.alt}\n                width={32}\n                height={32}\n                className=\"object-contain\"\n                priority\n              />\n            </div>\n          </Link>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default BottomNavigation;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,mBAAmB;IACvB,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,WAAW;IACb,GAAG,EAAE;IAEL,IAAI,CAAC,SAAS;QACZ,OAAO;IACT;IAEA,MAAM,OAAO;QACX;YACE,MAAM;YACN,MAAM;YACN,SAAS;YACT,KAAK;QACP;QACA;YACE,MAAM;YACN,MAAM;YACN,SAAS;YACT,KAAK;QACP;QACA;YACE,MAAM;YACN,MAAM;YACN,SAAS;YACT,KAAK;QACP;KACD;IAED,qBACE,8OAAC;QAAI,WAAU;kBACZ,KAAK,GAAG,CAAC,CAAC;YACT,MAAM,WAAW,aAAa,IAAI,IAAI,IAAI,SAAS,UAAU,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;YAE5E,qBACE,8OAAC,4JAAA,CAAA,UAAI;gBAEH,MAAM,IAAI,IAAI;gBACd,WAAW,CAAC,0GAA0G,EACpH,WACI,qHACA,uCACJ;gBACF,OAAO;oBACL,YAAY,WAAW,wCAAwC;gBACjE;0BAEA,cAAA,8OAAC;oBAAI,WAAW,CAAC,IAAI,EAAE,WAAW,sDAAsD,IAAI;8BAC1F,cAAA,8OAAC,6HAAA,CAAA,UAAK;wBACJ,KAAK,IAAI,OAAO;wBAChB,KAAK,IAAI,GAAG;wBACZ,OAAO;wBACP,QAAQ;wBACR,WAAU;wBACV,QAAQ;;;;;;;;;;;eAlBP,IAAI,IAAI;;;;;QAuBnB;;;;;;AAGN;uCAEe","debugId":null}},
    {"offset": {"line": 1349, "column": 0}, "map": {"version":3,"sources":["file:///Users/graceli/Documents/Dev/PaperProtoTwo/PaperProto/lib/firebase.js"],"sourcesContent":["// lib/firebase.js\nimport { initializeApp, getApps } from 'firebase/app';\nimport { getAuth } from 'firebase/auth';\nimport { getFirestore } from 'firebase/firestore';\n\n// Our Firebase configuration\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n  measurementId: process.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID\n};\n\n// Initialize Firebase only if it hasn't been initialized yet\nlet firebaseApp;\nif (!getApps().length) {\n  firebaseApp = initializeApp(firebaseConfig);\n} else {\n  firebaseApp = getApps()[0];\n}\n\n// Export Firebase services\nexport const auth = getAuth(firebaseApp);\nexport const db = getFirestore(firebaseApp);\n\nexport default firebaseApp;"],"names":[],"mappings":"AAAA,kBAAkB;;;;;;AAClB;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,6BAA6B;AAC7B,MAAM,iBAAiB;IACrB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;IACL,aAAa;AACf;AAEA,6DAA6D;AAC7D,IAAI;AACJ,IAAI,CAAC,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,IAAI,MAAM,EAAE;IACrB,cAAc,CAAA,GAAA,oLAAA,CAAA,gBAAa,AAAD,EAAE;AAC9B,OAAO;IACL,cAAc,CAAA,GAAA,oLAAA,CAAA,UAAO,AAAD,GAAG,CAAC,EAAE;AAC5B;AAGO,MAAM,OAAO,CAAA,GAAA,6MAAA,CAAA,UAAO,AAAD,EAAE;AACrB,MAAM,KAAK,CAAA,GAAA,iKAAA,CAAA,eAAY,AAAD,EAAE;uCAEhB","debugId":null}},
    {"offset": {"line": 1390, "column": 0}, "map": {"version":3,"sources":["file:///Users/graceli/Documents/Dev/PaperProtoTwo/PaperProto/app/create/page.js"],"sourcesContent":["// updated Home component with game cover image upload at publish step\n\"use client\";\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport ChatInterface from '../../components/ChatInterface';\nimport GameDisplay from '../../components/GameDisplay';\nimport { Gamepad2, MessageSquare, AlertTriangle, Share2 } from 'lucide-react';\nimport BottomNavigation from '../../components/BottomNavigation';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { doc, setDoc, updateDoc } from 'firebase/firestore';\nimport { db } from '../../lib/firebase';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport default function Home() {\n  const router = useRouter();\n  const [gameCode, setGameCode] = useState(null);\n  const [gameType, setGameType] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [mounted, setMounted] = useState(false);\n  const [showPublishModal, setShowPublishModal] = useState(false);\n  const [gameTitle, setGameTitle] = useState('');\n  const [gameDescription, setGameDescription] = useState('');\n  const [publishing, setPublishing] = useState(false);\n  const [publishSuccess, setPublishSuccess] = useState(false);\n  const [gameImage, setGameImage] = useState(null);\n  const [gameImagePreview, setGameImagePreview] = useState(null);\n\n  const { currentUser, userData } = useAuth();\n\n  useEffect(() => {\n    setMounted(true);\n    document.getElementById('game-container')?.classList.add('crt-on');\n  }, []);\n\n  const handleGameGeneration = async (type, code) => {\n    setLoading(true);\n    setError(null);\n    try {\n      await new Promise(resolve => setTimeout(resolve, 5000));\n      if (code) {\n        setGameType(type);\n        setGameCode(code);\n        console.log(`Received ${type} game code directly, length: ${code.length}`);\n      } else {\n        console.warn(\"No game code provided\");\n      }\n    } catch (error) {\n      console.error('Error processing game:', error);\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleImageUpload = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = (ev) => setGameImagePreview(ev.target.result);\n    reader.readAsDataURL(file);\n    setGameImage(file);\n  };\n\n  const handlePublishGame = async () => {\n    if (!gameCode || !gameTitle.trim() || !gameDescription.trim()) {\n      setError(\"Please generate a game and provide a title and description\");\n      return;\n    }\n    \n    // Check if user is logged in\n    if (!currentUser) {\n      // Redirect to auth page instead of just showing an error\n      router.push('/auth');\n      return;\n    }\n  \n    const userId = currentUser.uid;\n    const userName = userData?.username || currentUser.displayName || currentUser.email?.split('@')[0] || 'Anonymous User';\n  \n    setPublishing(true);\n    setError(null);\n\n    try {\n      const gameUuid = uuidv4();\n      const imageBase64 = gameImagePreview || null;\n\n      await setDoc(doc(db, \"games\", gameUuid), {\n        game_uuid: gameUuid,\n        creator_id: userId,\n        creator_name: userName,\n        title: gameTitle,\n        description: gameDescription,\n        gameType: gameType,\n        gameCode: gameCode,\n        image: imageBase64,\n        playCount: 0,\n        favCount: 0,\n        createdAt: new Date()\n      });\n\n      if (userData) {\n        const userRef = doc(db, \"users\", userId);\n        const currentProjectIds = userData.project_ids || [];\n        const gameCount = userData.gameCount || 0;\n        if (!currentProjectIds.includes(gameUuid)) {\n          await updateDoc(userRef, {\n            gameCount: gameCount + 1,\n            project_ids: [...currentProjectIds, gameUuid]\n          });\n        }\n      }\n\n      setPublishSuccess(true);\n      setTimeout(() => {\n        setPublishSuccess(false);\n        setShowPublishModal(false);\n        setGameTitle('');\n        setGameDescription('');\n        setGameImage(null);\n        setGameImagePreview(null);\n      }, 2000);\n    } catch (error) {\n      console.error('Error publishing game:', error);\n      setError(error.message);\n    } finally {\n      setPublishing(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 retro-grid-bg\">\n      {/* Header with retro styling */}\n      <header className=\"bg-indigo-900 border-b-4 border-pink-500 shadow-lg\">\n        <div className=\"container mx-auto py-4 px-4 flex justify-between items-center\">\n          <h1 className=\"text-3xl font-bold text-center tracking-wider text-pink-500\" \n              style={{ \n                textShadow: '2px 2px 0px #4F46E5, 4px 4px 0px #2D3748',\n                fontFamily: '\"Press Start 2P\", cursive'\n              }}>\n            GAME GENERATOR\n          </h1>\n          {gameCode && (\n            <button \n                onClick={() => {\n                if (!currentUser) {\n                    router.push('/auth');\n                } else {\n                    setShowPublishModal(true);\n                }\n                }}\n                className=\"px-4 py-2 bg-pink-600 hover:bg-pink-700 text-white rounded-md border-2 border-pink-400 shadow-[2px_2px_0px_0px_rgba(236,72,153)] transition-all hover:shadow-[1px_1px_0px_0px_rgba(236,72,153)] flex items-center\"\n                style={{ fontFamily: '\"Press Start 2P\", cursive', fontSize: '10px' }}\n            >\n                <Share2 size={16} className=\"mr-2\" />\n                PUBLISH\n            </button>\n            )}\n        </div>\n      </header>\n\n      <main className=\"container mx-auto p-4 pt-6\">\n        {error && (\n          <div className=\"mb-4 p-4 bg-red-900 text-pink-200 border-4 border-red-500 rounded-lg shadow-[4px_4px_0px_0px_rgba(239,68,68)]\">\n            <div className=\"flex items-center\">\n              <AlertTriangle size={24} className=\"mr-2 text-red-400\" />\n              <p className=\"font-medium\">ERROR DETECTED: {error}</p>\n            </div>\n            <p className=\"text-sm mt-1 ml-8\">Please check your API key configuration and try again.</p>\n          </div>\n        )}\n        \n        <div id=\"game-container\" className=\"flex flex-col md:flex-row gap-4 h-[80vh]\">\n          {/* Left side - Chat with Claude */}\n          <div className=\"md:w-1/3 bg-gray-800 border-4 border-indigo-600 rounded-lg shadow-[6px_6px_0px_0px_rgba(79,70,229)] overflow-hidden\">\n            <div className=\"px-4 py-2 bg-indigo-800 border-b-4 border-indigo-500 flex items-center\">\n              <MessageSquare size={20} className=\"mr-2 text-pink-400\" />\n              <h2 className=\"text-lg font-bold text-white\"\n                  style={{ \n                    textShadow: '1px 1px 0px #4F46E5',\n                    fontFamily: '\"Press Start 2P\", cursive',\n                    fontSize: '12px'\n                  }}>\n                CHAT CONSOLE\n              </h2>\n            </div>\n            <ChatInterface onGameRequest={handleGameGeneration} setLoading={setLoading}/>\n          </div>\n          \n          {/* Right side - Game Display */}\n          <div className=\"md:w-2/3 bg-gray-800 border-4 border-indigo-600 rounded-lg shadow-[6px_6px_0px_0px_rgba(79,70,229)] overflow-hidden\">\n            <div className=\"px-4 py-2 bg-indigo-800 border-b-4 border-indigo-500 flex items-center\">\n              <Gamepad2 size={20} className=\"mr-2 text-pink-400\" />\n              <h2 className=\"text-lg font-bold text-white\"\n                  style={{ \n                    textShadow: '1px 1px 0px #4F46E5',\n                    fontFamily: '\"Press Start 2P\", cursive',\n                    fontSize: '12px'\n                  }}>\n                GAME SCREEN\n              </h2>\n            </div>\n            {/* Pass explicitly loading={loading} to ensure the prop is passed */}\n            <GameDisplay \n              gameCode={gameCode} \n              gameType={gameType} \n              loading={loading} \n            />\n          </div>\n        </div>\n      </main>\n      \n      <BottomNavigation/>\n\n      {/* Publish Modal */}\n      {showPublishModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-gray-800 border-4 border-pink-500 rounded-lg w-full max-w-md\">\n            <div className=\"p-4 border-b-4 border-indigo-500 bg-indigo-800\">\n              <h3 className=\"text-lg text-white font-bold\">PUBLISH YOUR GAME</h3>\n            </div>\n            <div className=\"p-6 space-y-4\">\n              {publishSuccess ? (\n                <div className=\"bg-green-800 text-green-200 p-4 rounded text-center animate-pulse\">\n                  Game published successfully!\n                </div>\n              ) : (\n                <>\n                  <div>\n                    <label className=\"block text-sm text-pink-300 font-bold\">GAME TITLE</label>\n                    <input\n                      type=\"text\"\n                      value={gameTitle}\n                      onChange={(e) => setGameTitle(e.target.value)}\n                      className=\"w-full bg-gray-700 border-2 border-indigo-500 rounded px-3 py-2 text-white\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-pink-300 font-bold\">DESCRIPTION</label>\n                    <textarea\n                      value={gameDescription}\n                      onChange={(e) => setGameDescription(e.target.value)}\n                      className=\"w-full bg-gray-700 border-2 border-indigo-500 rounded px-3 py-2 text-white h-24 resize-none\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm text-pink-300 font-bold\">COVER IMAGE</label>\n                    <input type=\"file\" accept=\"image/*\" onChange={handleImageUpload} className=\"mt-1 text-white\" />\n                    {gameImagePreview && (\n                      <img src={gameImagePreview} className=\"w-full h-32 object-cover rounded mt-2\" alt=\"Cover Preview\" />\n                    )}\n                  </div>\n\n                  <div className=\"flex justify-between\">\n                    <button onClick={() => setShowPublishModal(false)} className=\"px-4 py-2 bg-gray-700 text-white rounded\">Cancel</button>\n                    <button\n                      onClick={handlePublishGame}\n                      disabled={publishing || !gameTitle.trim() || !gameDescription.trim()}\n                      className=\"px-4 py-2 bg-pink-600 text-white rounded disabled:opacity-50\"\n                    >\n                      {publishing ? 'Publishing...' : 'Publish Game'}\n                    </button>\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}